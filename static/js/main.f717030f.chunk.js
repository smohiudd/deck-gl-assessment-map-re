(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){e.exports=a(157)},143:function(e,t,a){},155:function(e,t){},157:function(e,t,a){"use strict";a.r(t);var n,l,o,r,c,i,u,s,b,g,m,O,d=a(10),j=a.n(d),f=a(113),p=a.n(f),h=(a(143),a(1)),y=a(2),v=a(4),E=a(3),S=a(7),w=a(5),z=a(167),q=a(169),_=a(120),k=a(165),C=a(115),A=a(116),x=a.n(A),N=a(19),L=a(16),V=a(166),D=a(8),R=a(35),I=(a(117),a(104),a(0)),M=a(44),T=a.n(M),B=T()({ordinal:null,quantile:null,quantize:null,linear:null,sqrt:null,point:null}),W=(a(35).scaleLinear,a(35).scaleQuantize,a(35).scaleQuantile,a(35).scaleOrdinal,a(35).scaleSqrt,a(35).scalePoint,T()({boolean:null,date:null,geojson:null,integer:null,real:null,string:null,timestamp:null,point:null})),P=(n={},Object(I.a)(n,W.boolean,{label:"bool",color:"231, 189, 194"}),Object(I.a)(n,W.date,{label:"date",color:"160, 106, 206"}),Object(I.a)(n,W.geojson,{label:"geo",color:"106, 160, 206"}),Object(I.a)(n,W.integer,{label:"int",color:"248, 194, 28"}),Object(I.a)(n,W.real,{label:"float",color:"248, 194, 28"}),Object(I.a)(n,W.string,{label:"string",color:"140, 210, 205"}),Object(I.a)(n,W.timestamp,{label:"time",color:"106, 160, 56"}),Object(I.a)(n,W.point,{label:"point",color:"0, 172, 237"}),function(e){return e}),G=(l={},Object(I.a)(l,W.string,P),Object(I.a)(l,W.timestamp,P),Object(I.a)(l,W.integer,P),Object(I.a)(l,W.boolean,function(e){return String(e)}),Object(I.a)(l,W.date,P),Object(I.a)(l,W.geojson,P),T()({color:null,radius:null,size:null,colorAggr:null,sizeAggr:null})),J="count",X="average",F="maximum",H="minimum",Q="median",U="sum",Y="mode",Z="count unique",$=(o={},Object(I.a)(o,G.color,[B.quantize,B.quantile]),Object(I.a)(o,G.radius,[B.sqrt]),Object(I.a)(o,G.size,[B.linear]),o),K=(i={},Object(I.a)(i,G.colorAggr,(r={},Object(I.a)(r,X,[B.quantize,B.quantile]),Object(I.a)(r,F,[B.quantize,B.quantile]),Object(I.a)(r,H,[B.quantize,B.quantile]),Object(I.a)(r,Q,[B.quantize,B.quantile]),Object(I.a)(r,U,[B.quantize,B.quantile]),r)),Object(I.a)(i,G.sizeAggr,(c={},Object(I.a)(c,X,[B.linear]),Object(I.a)(c,F,[B.linear]),Object(I.a)(c,H,[B.linear]),Object(I.a)(c,Q,[B.linear]),Object(I.a)(c,U,[B.linear]),c)),i),ee=(u={},Object(I.a)(u,G.color,[B.ordinal]),Object(I.a)(u,G.radius,[B.point]),Object(I.a)(u,G.size,[B.point]),u),te=(b={},Object(I.a)(b,G.colorAggr,(s={},Object(I.a)(s,Y,[B.ordinal]),Object(I.a)(s,Z,[B.quantize,B.quantile]),s)),Object(I.a)(b,G.sizeAggr,{}),b),ae=(g={},Object(I.a)(g,G.color,[]),Object(I.a)(g,G.radius,[]),Object(I.a)(g,G.size,[]),g),ne=(m={},Object(I.a)(m,G.colorAggr,{}),Object(I.a)(m,G.sizeAggr,{}),m),le=(O={},Object(I.a)(O,G.colorAggr,Object(I.a)({},J,[B.quantize,B.quantile])),Object(I.a)(O,G.sizeAggr,Object(I.a)({},J,[B.linear])),{string:{type:"categorical",scale:Object(L.a)({},ee,te),format:{legend:function(e){return e}}},real:{type:"numerical",scale:Object(L.a)({},$,K),format:{legend:function(e){return e}}},timestamp:{type:"time",scale:Object(L.a)({},$,ne),format:{legend:function(e){return e}}},integer:{type:"numerical",scale:Object(L.a)({},$,K),format:{legend:function(e){return e}}},boolean:{type:"boolean",scale:Object(L.a)({},ee,te),format:{legend:function(e){return e}}},date:{scale:Object(L.a)({},ee,te),format:{legend:function(e){return e}}},geojson:{type:"geometry",scale:Object(L.a)({},ae,ne),format:{legend:function(e){return"..."}}}}),oe=(Object.keys(G).reduce(function(e,t){return Object(L.a)({},e,Object(I.a)({},t,Object.keys(le).filter(function(e){return Object.keys(le[e].scale[t]).length})))},{}),T()({point:null,arc:null,cluster:null,line:null,grid:null,geojson:null,icon:null,heatmap:null,hexagon:null}),T()({ONE_X:null,TWO_X:null})),re=T()({SCREEN:null,FOUR_BY_THREE:null,SIXTEEN_BY_NINE:null}),ce=(re.SCREEN,re.FOUR_BY_THREE,re.SIXTEEN_BY_NINE,oe.ONE_X,Math.log2(1),oe.TWO_X,Math.log2(2),T()({CSV:null})),ie=(ce.CSV,ce.CSV.toLowerCase(),T()({HTML:null,JSON:null}));Object.entries(ie).map(function(e){return{id:e[0],label:e[1].toLowerCase(),available:!0}}),T()({info:null,error:null,warning:null,success:null}),T()({global:null,file:null});function ue(e){return void 0!==e&&null!==e}function se(e,t,a){var n=Object(D.a)(a,2),l=n[0],o=n[1];switch(e){case B.quantize:return[t[l].value,t[o].value];case B.quantile:return t.slice(l,o+1).map(function(e){return e.value});case B.ordinal:return function(e){var t=[];return e.forEach(function(e){!t.includes(e)&&ue(e)&&t.push(e)}),t}(t.map(function(e){return e.value})).sort();default:return[t[l].value,t[o].value]}}function be(e){var t=e.props,a=t.colorScale,n=t.colorDomain;e.state.colorScaleFunc=function(e){switch(e){case B.quantize:return R.scaleQuantize;case B.quantile:return R.scaleQuantile;case B.ordinal:return R.scaleOrdinal;default:return R.scaleQuantile}}(a)().domain(n||e.state.colorDomain||e.state.colorValueDomain).range(e.props.colorRange)}var ge=Object(L.a)({},V.a.defaultProps,{colorScale:"quantile"}),me=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(y.a)(t,[{key:"getDimensionUpdaters",value:function(){var e=Object(N.a)(Object(E.a)(t.prototype),"getDimensionUpdaters",this).call(this);return e.getFillColor[1].triggers.push("colorScale"),e}},{key:"getColorValueDomain",value:function(){!function(e){var t=e.props,a=t.lowerPercentile,n=t.upperPercentile,l=t.colorScale,o=e.state.sortedColorBins.sortedBins,r=o.length;if(r){var c=Math.ceil(a/100*(r-1)),i=Math.floor(n/100*(r-1));e.state.colorValueDomain=se(l,o,[c,i]),e.getColorScale()}else e.state.colorValueDomain=null;e.props.onSetColorDomain(e.state.colorValueDomain)}(this)}},{key:"getColorScale",value:function(){be(this)}}]),t}(V.a);me.layerName="EnhancedHexagonLayer",me.defaultProps=ge;var Oe=function(e){return j.a.createElement("div",null,j.a.createElement("div",{className:"absolute top left w300 h120 py6 px6 ml36 mt36 bg-yellow-light prose"},j.a.createElement("h4",null,"City of Calgary Residential Property Assessment"),"Deck.gl Hexagonal Aggregation Layer"))},de="pk.eyJ1Ijoic2FhZGlxbSIsImEiOiJjamJpMXcxa3AyMG9zMzNyNmdxNDlneGRvIn0.wjlI8r1S_-xxtq2d-W5qPA",je={longitude:-114.062019,latitude:51.04427,zoom:10.5},fe=[[68,1,84],[65,68,135],[42,120,142],[34,168,132],[122,209,81],[253,231,37]],pe=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(E.a)(t).call(this,e)))._onWebGLInitialized=function(e){a.setState({gl:e})},a._onMapLoad=function(){var e=a._map,t=a._deck;e.addLayer(new q.a({id:"assessment-RE",deck:t}),"waterway-label")},a.state={zoom:je.zoom},a._onViewStateChange=a._onViewStateChange.bind(Object(S.a)(a)),a}return Object(w.a)(t,e),Object(y.a)(t,[{key:"_onViewStateChange",value:function(e){var t=e.viewState;this.setState({zoom:t.zoom})}},{key:"_renderLayers",value:function(){return[new k.a({id:"assessment-RE",type:k.a,getTileData:function(e){var t=e.x,a=e.y,n=e.z,l="https://a.tiles.mapbox.com/v4/saadiqm.azk20mv4/".concat(n,"/").concat(t,"/").concat(a,".vector.pbf?access_token=").concat(de);return fetch(l).then(function(e){return e.arrayBuffer()}).then(function(e){for(var l=[],o=new C.VectorTile(new x.a(e)).layers.RE,r=0;r<o.length;r++){var c=o.feature(r).toGeoJSON(t,a,n);l.push(c)}return l})},onTileError:function(e){return console.error(e)},maxZoom:10,renderSubLayers:function(e){return new me(e,{opacity:.9,pickable:!1,extruded:!1,radius:80,coverage:.8,colorAggregation:"MEAN",getColorWeight:function(e){return e.properties.RE_ASSESSED_VALUE},colorRange:fe,colorScale:"quantile",getPosition:function(e){return e.geometry.coordinates}})}})]}},{key:"render",value:function(){var e=this,t=this.state.gl;return j.a.createElement("div",null,j.a.createElement(z.a,{ref:function(t){e._deck=t&&t.deck},layers:this._renderLayers(),initialViewState:je,controller:!0,onWebGLInitialized:this._onWebGLInitialized,onViewStateChange:this._onViewStateChange},t&&j.a.createElement(_.a,{ref:function(t){e._map=t&&t.getMap()},gl:t,mapStyle:"mapbox://styles/saadiqm/cjxbd493m05cc1cl29jntlb1w?optimize=true",mapboxApiAccessToken:de,onLoad:this._onMapLoad})),j.a.createElement(Oe,null))}}]),t}(j.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.render(j.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[138,1,2]]]);
//# sourceMappingURL=main.f717030f.chunk.js.map